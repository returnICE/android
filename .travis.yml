language: android
jdk: oraclejdk8
sudo: required


env:
   global:
      - ANDROID_API_LEVEL=28
      - ANDROID_EMULATOR_LEVEL=28
      - ANDROID_BUILD_TOOLS_VERSION=26.1.1
      - ADB_INSTALL_TIMEOUT=20
      - ANDROID_ABI=armeabi-v7a
android:
   components:
      - tools
      - platform-tools
      - tools
      - build-tools-$ANDROID_BUILD_TOOLS_VERSION
      - android-$ANDROID_API_LEVEL
      - android-$ANDROID_EMULATOR_LEVEL
      - extra-android-support
      - extra-google-google_play_services
      - extra-google-m2repository
      - extra-android-m2repository
      - sys-img-$ANDROID_ABI-andoroid-$ANDROID_EMULATOR_LEVEL

licenses:
   - android-sdk-preview-license-.+
   - android-sdk-license-.+
   - google-gdk-license-.+

cache:
   directories:
      - "$HOME/.gradle/caches/"
      - "$HOME/.gradle/wrapper/"
      - "$HOME/.android/build-cache"

before_install:
   - chmod +x gradlew
   - android list targets
   - echo no | android create avd --force -n test -t android-$ANDROID_EMULATOR_LEVEL --abi ANDROID_ABI
   - emulator -avd test -no-skin -no-audio -no-window &
   - android-wait-for-emulator
   - adb shell input keyevent 82 &



before_script:
   - android-wait-for-emulator
   - adb shell input keyevent 82 &


script:
   - ./gradlew build connectedCheck
   - ./gradlew dependencyCehckAnalyze build
   - adb shell input keyevent 82 &
